<div class="settings-container">
    <div class="settings-header">
        <h1 data-i18n="settings.title">Settings</h1>
        <p data-i18n="settings.subtitle">Configure your IVIDS experience</p>
    </div>

    <!-- Appearance Settings -->
    <div class="settings-section">
        <h2 class="section-title">
            <svg class="section-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 7.02944 12 3ZM12 3V12M12 3C14.5013 3 16.7386 4.21128 18.1792 6.08296"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
            <span data-i18n="settings.appearance">Appearance</span>
        </h2>

        <div class="setting-item">
            <div class="setting-info">
                <div class="setting-label" data-i18n="settings.language">Language</div>
                <div class="setting-description" data-i18n="settings.languageDesc">Choose your preferred language</div>
            </div>
            <div class="setting-control">
                <div id="current-language-display" class="current-value-display">English</div>
                <button id="edit-language-btn" class="edit-trigger focusable"
                    onclick="openSettingsModal('language-modal')">
                    <div class="edit-icon"></div>
                </button>
            </div>
        </div>

        <div class="setting-item">
            <div class="setting-info">
                <div class="setting-label" data-i18n="settings.accentColor">Accent Color</div>
                <div class="setting-description" data-i18n="settings.accentColorDesc">Choose your preferred theme color
                </div>
            </div>
            <div class="setting-control">
                <div id="current-color-display" class="current-value-display"
                    style="border-bottom: 3px solid var(--primary-color)">Accent</div>
                <button id="edit-color-btn" class="edit-trigger focusable" onclick="openSettingsModal('color-modal')">
                    <div class="edit-icon"></div>
                </button>
            </div>
        </div>
    </div>

    <!-- App Updates Settings -->
    <div id="app-updates-section" class="settings-section">
        <h2 class="section-title">
            <svg class="section-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 15L12 3M12 15L8 11M12 15L16 11M2 17L2 18C2 19.6569 3.34315 21 5 21L19 21C20.6569 21 22 19.6569 22 18L22 17"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
            <span data-i18n="settings.updates">App Updates</span>
        </h2>

        <div class="setting-item">
            <div class="setting-info">
                <div class="setting-label" data-i18n="settings.updateMode">Update Mode</div>
                <div class="setting-description" data-i18n="settings.updateModeDesc">Choose how the app handles updates
                </div>
            </div>
            <div class="setting-control">
                <div id="current-update-mode-display" class="current-value-display">Manual</div>
                <button id="edit-update-mode-btn" class="edit-trigger focusable"
                    onclick="openSettingsModal('update-mode-modal')">
                    <div class="edit-icon"></div>
                </button>
            </div>
        </div>

        <div id="manual-check-container" class="setting-item" style="display: none;">
            <div class="setting-info">
                <div class="setting-label" data-i18n="settings.checkNow">Check for Updates</div>
                <div class="setting-description" data-i18n="settings.checkNowDesc">Manually search for updates</div>
            </div>
            <div class="setting-control update-control">
                <div id="update-loader-container" class="loader-inline-container"></div>
                <span id="update-status-text" class="update-status-label"></span>
                <button id="check-updates-btn" class="action-btn focusable" data-i18n="settings.checkButton">Check
                    Now</button>
            </div>
        </div>
    </div>
</div>

<!-- Language Modal -->
<div id="language-modal" class="modal-overlay" onclick="if(event.target === this) closeSettingsModal()">
    <div class="modal-content">
        <h2 class="modal-title" data-i18n="settings.language">Language</h2>
        <div class="modal-body">
            <div id="language-options" class="option-grid">
                <div class="option-chip focusable" data-value="en" onclick="setPendingSetting('language', 'en', this)">
                    English</div>
                <div class="option-chip focusable" data-value="es" onclick="setPendingSetting('language', 'es', this)">
                    Español</div>
                <div class="option-chip focusable" data-value="fr" onclick="setPendingSetting('language', 'fr', this)">
                    Français</div>
                <div class="option-chip focusable" data-value="de" onclick="setPendingSetting('language', 'de', this)">
                    Deutsch</div>
                <div class="option-chip focusable" data-value="nl" onclick="setPendingSetting('language', 'nl', this)">
                    Nederlands</div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="modal-btn secondary focusable" onclick="closeSettingsModal()"
                data-i18n="common.cancel">Cancel</button>
            <button class="modal-btn primary focusable" onclick="applyPendingSetting('language')"
                data-i18n="common.apply">Apply</button>
        </div>
    </div>
</div>

<!-- Color Modal -->
<div id="color-modal" class="modal-overlay" onclick="if(event.target === this) closeSettingsModal()">
    <div class="modal-content">
        <h2 class="modal-title" data-i18n="settings.accentColor">Accent Color</h2>
        <div class="modal-body">
            <div id="color-options" class="option-grid color-option-grid">
                <div class="option-chip focusable color-only" data-value="#46d369"
                    onclick="setPendingSetting('accentColor', '#46d369', this)">
                    <div class="color-dot" style="background-color: #46d369"></div>
                </div>
                <div class="option-chip focusable color-only" data-value="#e50914"
                    onclick="setPendingSetting('accentColor', '#e50914', this)">
                    <div class="color-dot" style="background-color: #e50914"></div>
                </div>
                <div class="option-chip focusable color-only" data-value="#00d4ff"
                    onclick="setPendingSetting('accentColor', '#00d4ff', this)">
                    <div class="color-dot" style="background-color: #00d4ff"></div>
                </div>
                <div class="option-chip focusable color-only" data-value="#9146ff"
                    onclick="setPendingSetting('accentColor', '#9146ff', this)">
                    <div class="color-dot" style="background-color: #9146ff"></div>
                </div>
                <div class="option-chip focusable color-only" data-value="#ff6b35"
                    onclick="setPendingSetting('accentColor', '#ff6b35', this)">
                    <div class="color-dot" style="background-color: #ff6b35"></div>
                </div>
                <div class="option-chip focusable color-only" data-value="#ffd700"
                    onclick="setPendingSetting('accentColor', '#ffd700', this)">
                    <div class="color-dot" style="background-color: #ffd700"></div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="modal-btn secondary focusable" onclick="closeSettingsModal()"
                data-i18n="common.cancel">Cancel</button>
            <button class="modal-btn primary focusable" onclick="applyPendingSetting('accentColor')"
                data-i18n="common.apply">Apply</button>
        </div>
    </div>
</div>

<!-- Update Mode Modal -->
<div id="update-mode-modal" class="modal-overlay" onclick="if(event.target === this) closeSettingsModal()">
    <div class="modal-content">
        <h2 class="modal-title" data-i18n="settings.updateMode">Update Mode</h2>
        <div class="modal-body">
            <div id="update-mode-options" class="option-grid">
                <div class="option-chip focusable" data-value="auto"
                    onclick="setPendingSetting('updateMode', 'auto', this)" data-i18n="settings.mode.auto">Auto</div>
                <div class="option-chip focusable" data-value="manual"
                    onclick="setPendingSetting('updateMode', 'manual', this)" data-i18n="settings.mode.manual">Manual
                </div>
                <div class="option-chip focusable" data-value="none"
                    onclick="setPendingSetting('updateMode', 'none', this)" data-i18n="settings.mode.none">Off</div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="modal-btn secondary focusable" onclick="closeSettingsModal()"
                data-i18n="common.cancel">Cancel</button>
            <button class="modal-btn primary focusable" onclick="applyPendingSetting('updateMode')"
                data-i18n="common.apply">Apply</button>
        </div>
    </div>
</div>